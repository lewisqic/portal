function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),Wizard=function(){function e(){_classCallCheck(this,e),this.init()}return _createClass(e,[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){var e=this;$(".next-step").on("click",function(t){t.preventDefault(),$(this).hasClass("activate-now")||e.changeStep("next")}),$(".previous-step").on("click",function(t){t.preventDefault(),e.changeStep("previous")}),$('input[name="activation"]').on("change",function(){e.activationOption($(this))}),$("body").on("click",".activate-now",function(t){t.preventDefault(),e.createStripeAccount()}),$(".finish-setup").on("click",function(t){t.preventDefault(),e.submitForm()}),$(".save-settings").on("click",function(t){t.preventDefault(),e.submitForm({setup_completed:0},!1)})}},{key:"changeStep",value:function(e){var t=parseFloat($(".step-content:visible").attr("data-step")),a="next"===e?t+1:t-1;$("#setup_wizard_form").formValidation({icon:{valid:"fa fa-check text-success",invalid:"fa fa-times text-danger"},trigger:"blur",framework:"bootstrap4",row:{valid:""}}).formValidation("validate");var i=$("#setup_wizard_form").data("formValidation");if("next"===e&&!i.isValid())return!1;$(".step-content").hide(),$(".step-heading").removeClass("active"),$('.step-content[data-step="'+a+'"]').show(),$('.step-heading[data-step="'+a+'"]').addClass("active")}},{key:"activationOption",value:function(e){$(".abc-radio .form-text").hide(),e.closest(".abc-radio").find(".form-text").show(),"now"==e.val()?($(".activation-fields").show(),$(".next-step:visible").addClass("activate-now")):($(".activation-fields, .activation-error").hide(),$(".next-step:visible").removeClass("activate-now"))}},{key:"createStripeAccount",value:function(){$("#setup_wizard_form").formValidation({icon:{valid:"fa fa-check text-success",invalid:"fa fa-times text-danger"},trigger:"blur",framework:"bootstrap4",row:{valid:""}}).formValidation("validate"),$("#setup_wizard_form").data("formValidation").isValid()&&$.ajax({url:Core.url("account/create-stripe-account"),method:"POST",data:{country:$('select[name="stripe_country"]').val(),email:$('input[name="stripe_email"]').val()},beforeSend:function(){$(".activation-error").hide(),$(".next-step.stripe").find(".fa").removeClass("fa-long-arrow-right").addClass("fa-circle-o-notch fa-spin")}}).done(function(e,t,a){$("#activation_later").prop("disabled",!0),$(".activation-fields").hide(),$(".activation-success").show(),$(".next-step.stripe").find(".fa").removeClass("fa-circle-o-notch fa-spin").addClass("fa-long-arrow-right"),$(".next-step.stripe").removeClass("activate-now").trigger("click")}).fail(function(e,t,a){$(".activation-error").show(),$(".next-step.stripe").find(".fa").removeClass("fa-circle-o-notch fa-spin").addClass("fa-long-arrow-right")})}},{key:"submitForm",value:function(e,t){var a=void 0===e?{}:e,i=void 0===t||t;$("#setup_wizard_form").ajaxSubmit({data:a,beforeSubmit:function(){i&&$(".finish-setup").addClass("disabled").find(".fa").removeClass("fa-check").addClass("fa-circle-o-notch fa-spin")},error:function(e,t,a){var i=e.responseJSON&&e.responseJSON.message?e.responseJSON.message:e.responseText?e.responseText:"Oops, something went wrong...";alert(i)},success:function(e){e.route&&i&&(window.location=e.route)}})}}]),e}();$(function(){new Wizard});